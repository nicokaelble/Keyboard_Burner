{% extends 'base.html' %}

{% block content %}
<main role="main" class="container" style="margin-top: 30px;">
    <div class="jumbotron">
        <div class="row" style="margin-bottom: 50px; padding-left: 20px">
            <div class="col d-flex justify-content-left" style="padding: 0px;">
                <h1>Welcome to your profile <span style="color: #FFC000;">{{ g.user['username'] }}</span>!!!</h1>
            </div>
        </div>
        <div class="row" style="margin-bottom: 20px;">
            <div class="col d-flex justify-content-left" style="padding: 0px;">
                <div class="col-sm-5" style="display: table; height: 300px; #position: relative; overflow: hidden;">
                    <div style="#position: absolute; #top: 50%;display: table-cell; vertical-align: middle;">
                        <div style=" #position: relative; #top: -50%">
                            <h3>The graph on the right shows your individual progress on your test results.</h3>
                        </div>
                    </div>
                </div>

                <div class="col-sm-7" style="display: table; height: 300px; #position: relative; overflow: hidden;">
                    <div class="row" style="margin-bottom: 20px; height: 300px;" id="line_chart"></div>
                </div>
            </div>
        </div>

        <div class="row justify-content-center" style="margin-bottom: 40px;">
            <button id="toggleData" class="btn btn-primary btn-lg" onclick="toggleDataTable()">
                SHOW MORE DETAILS ABOUT MY TYPING-HISTORY</button>
        </div>


        <div id="data" class="row" style="margin-bottom: 0px;" hidden>
            <div class="col d-flex justify-content-center" style="padding: 0px;">
                <table class="table table-dark">
                    <thead>
                        <tr>
                            <th scope="col">Test Nr.</th>
                            <th scope="col">Speed</th>
                            <th scope="col">Test Duration</th>
                            <th scope="col">Mistakes</th>
                            <th scope="col">Correct Characters</th>
                            <th scope="col">Accuracy</th>
                            <th scope="col">Date</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% if typingtests %}
                        {% for test in typingtests %}
                        <tr>
                            <th scope="row">{{ loop.index }}</th>
                            <td>{{ test.speed }} characters/min</td>
                            <td>{{ test.duration }} sec</td>
                            <td>{{ test.mistakes }} </td>
                            <td>{{ test.characters }}</td>
                            <td>{{ test.accuracy }} %</td>
                            <td>{{ test.testdate }}</td>

                        </tr>
                        {% endfor %}
                        {% endif %}
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</main>
<script>
    let hidden = true;
    function toggleDataTable(){
        if(hidden){
            document.getElementById('toggleData').innerHTML = "HIDE DETAILS";
            document.getElementById('data').hidden = false;
            hidden = false;
        }else{
            document.getElementById('toggleData').innerHTML = "SHOW MORE DETAILS ABOUT MY TYPING-HISTORY";
            document.getElementById('data').hidden = true;
            hidden = true;
        }
        
    }
</script>

{% endblock content %}